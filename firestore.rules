rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Helper function: Kullanıcı authenticated mi?
    function isAuthenticated() {
      return request.auth != null;
    }
    
    // ========== Ön Kayıtlar ==========
    // Herkes oluşturabilir (public form), sadece admin okuyabilir/düzenleyebilir
    match /preApplications/{document} {
      allow create: if true; // Herkes ön kayıt yapabilir
      allow read, update, delete: if isAuthenticated(); // Sadece admin
    }
    
    // ========== Instagram Posts ==========
    // Herkes okuyabilir, sadece admin yazabilir
    match /instagramPosts/{document} {
      allow read: if true; // Public okuma (medya sayfası için)
      allow write: if isAuthenticated(); // Sadece admin
    }
    
    // ========== Media Items (Fotoğraf, Video, Press) ==========
    // Herkes okuyabilir (medya sayfası için), sadece admin yazabilir
    match /mediaItems/{document} {
      allow read: if true; // Public okuma
      allow write: if isAuthenticated(); // Sadece admin
    }
    
    // ========== Reviews (Veli Yorumları) ==========
    // Herkes okuyabilir (anasayfa için), sadece admin yazabilir
    match /reviews/{document} {
      allow read: if true; // Public okuma
      allow write: if isAuthenticated(); // Sadece admin
    }
    
    // ========== Announcements (Duyurular) ==========
    // Herkes okuyabilir (duyurular sayfası için), sadece admin yazabilir
    match /announcements/{document} {
      allow read: if true; // Public okuma
      allow write: if isAuthenticated(); // Sadece admin
    }
  }
}

